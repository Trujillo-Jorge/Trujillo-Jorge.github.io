<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link href= "styles/styleweek4.css" rel="stylesheet">
    <title>Week4</title>
    </head>

  <body>
    <h1>Topics to Reach</h1>
  <p>
  <h2>Week 4 Json Parse Stringify</h2>
 <ul>
   <li><a>JSON: JavaScript Object Notation.</a></li>
   <li><a>JSON is a syntax for storing and exchanging data.</a></li>
   <li><a>JSON is text, written with JavaScript object notation.</a></li>
  </ul>
   <h3>Json Parse</h3>
   <ul>
     <li><a>When receiving data from a web server, the data is always a string.</a></li>

     <li><a>Parse the data with JSON.parse(), and the data becomes a JavaScript object.</a></li>
  </ul>
  <h3>Json Stringify</h3>
   <ul>
     <li><a>When sending data to a web server, the data has to be a string.</a></li>

     <li><a>Convert a JavaScript object into a string with JSON.stringify().</a></li>
  </ul>
  
  <h4>Example</h4>
  
  <p id="demo"></p>

<script>
var myObj, myJSON, text, obj;
//Storing data:
myObj = { name: "Daniel", age: 41, city: "Quito" };
myJSON = JSON.stringify(myObj);
localStorage.setItem("testJSON", myJSON);
//Retrieving data:
text = localStorage.getItem("testJSON");
obj = JSON.parse(text);
document.getElementById("demo").innerHTML ="Name: " + obj.name;
</script>
  

<h3>Using XMLHTTPRequest to Consume a JSON Web Service</h3>
<h4>Example</h4>
<p id="demo1"></p>

<script>

var xmlhttp = new XMLHttpRequest();
xmlhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
        var myobj = JSON.parse(this.responseText);
        document.getElementById("demo1").innerHTML = myobj.pets["animal1"] +"   " + myobj.pets["name1"];
    }
};
xmlhttp.open("GET", "json_demo.txt", true);
xmlhttp.send();

</script>

<p>File txt <a href="json_demo.txt" target="_blank">json_demo.txt</a></p>  
  
</p>
  <p>In the same way we can request it from a Json server</p>
  <h4>Example</h4>
  <h5>The XMLHttpRequest Object</h5>

<button type="button" onclick="loadDoc()">Request data</button>

<p id="ajax"></p>

<script>
var xhttp = new XMLHttpRequest();
var url="https://jsonplaceholder.typicode.com/posts";

function loadDoc() {
    xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      document.getElementById("ajax").innerHTML = xhttp.responseText;
    }
  };
  xhttp.open("GET",url, true);
xhttp.send();
 }
</script>
  
  </body>
  </html>













